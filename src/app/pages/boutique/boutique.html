<div class="boutique-container">
  
  <div class="disclaimer-box">
    <span class="icon">âš ï¸</span>
    <div class="text-content">
      <strong>Note Importante :</strong> Nos parfums sont de la marque <strong>Chogan</strong>. 
      Les images et noms sont Ã  titre indicatif (similaire Ã  99%). Le packaging rÃ©el est standard Chogan.
      <small>Une confirmation tÃ©lÃ©phonique sera effectuÃ©e pour chaque commande.</small>
    </div>
  </div>

  <div class="categories-wrapper">
    <button (click)="chargerParfums('femmes')" [class.active]="activeCategory === 'femmes'" class="cat-btn femmes">
      ğŸ‘© Femmes
    </button>
    <button (click)="chargerParfums('hommes')" [class.active]="activeCategory === 'hommes'" class="cat-btn hommes">
      ğŸ‘¨ Hommes
    </button>
    <button (click)="chargerParfums('luxe')" [class.active]="activeCategory === 'luxe'" class="cat-btn luxe">
      âœ¨ Luxe
    </button>
  </div>

  <div class="products-grid">
    
    <div *ngIf="isLoading" class="loading-msg">Chargement...</div>

    <div *ngFor="let p of displayedParfums" class="product-card">
      
      <span *ngIf="p.nouveau" class="badge-new">Nouveau</span>

      <div class="image-wrapper" (click)="openModal(p)">
        <img [src]="p.image" [alt]="p.nom" loading="lazy" />
      </div>

      <div class="card-content">
        
        <div class="meta-row">
          <span class="category-tag" [ngClass]="activeCategory">{{ p.categorie }}</span>
          <span class="code-tag">{{ p.code }}</span>
        </div>

        <h3 class="product-name" (click)="openModal(p)">{{ p.nom }}</h3>
        
        <p class="desc">
          {{ p.description }} </p>
        
        <div class="price">{{ p.variantes[0].prix }} TND</div>

        <button class="add-btn" (click)="openModal(p)">
          Ajouter au Panier ğŸ›ï¸
        </button>

      </div>
    </div>
  </div>
  
  <div *ngIf="displayedParfums.length < parfums.length" class="scroll-loading">
      Chargement de plus de produits...
  </div>

  <app-product-modal 
    *ngIf="selectedProduct" 
    [product]="selectedProduct" 
    (close)="closeModal()"
    (addToCart)="handleAddToCart($event)">
  </app-product-modal>

</div>